# Surgery Duration Prediction - Datasheet

## 数据概述

**数据集名称**: PLoS ONE疝气手术数据集  
**数据来源**: 公开的学术研究数据集  
**数据用途**: 手术时长预测模型训练与评估  
**伦理声明**: 本数据集仅用于学术研究，不应用于个体医疗决策  

## 数据来源与背景

### 原始数据
- **文件**: `surgery_hernia_data_set.xlsx`
- **大小**: 23MB
- **格式**: Microsoft Excel (.xlsx)
- **来源**: PLoS ONE学术期刊相关研究

### 数据收集背景
- **时间范围**: [待补充具体年份]
- **地理范围**: [待补充具体地区]
- **医疗机构**: [待补充具体医院信息]
- **研究目的**: 分析疝气手术相关因素与手术时长的关系

## 数据质量报告

### 基本信息
- **样本量**: 5,240 例手术记录
- **特征数量**: 1,727 个特征（原始1,721个 + 6个派生特征）
- **缺失值比例**: 无缺失值
- **异常值情况**: 手术时长范围0-330分钟，存在0分钟异常值

## 字段说明

### 目标变量
- **duration_min**: 手术时长（分钟）
  - 类型: 数值型
  - 单位: 分钟
  - 范围: 0.0 - 330.0 分钟
  - 分布: 均值88.52分钟，标准差36.14分钟
  - 注意: 存在0分钟记录，需要进一步验证

### 时间特征
基于 `op_startdttm_fix`（手术开始时间）创建：
- **op_startdttm_fix_hour**: 手术开始时间（小时，0-23）
- **op_startdttm_fix_day_of_week**: 星期几（0=周一，6=周日）
- **op_startdttm_fix_is_weekend**: 是否周末（布尔值）
- **op_startdttm_fix_month**: 月份（1-12）
- **op_startdttm_fix_quarter**: 季度（1-4）
- **op_startdttm_fix_time_of_day**: 时间段分类（morning/afternoon/evening/night）

**其他时间相关列**:
- **op_enddttm_fix**: 手术结束时间
- **room_enter_dttm_fix**: 进入手术室时间
- **room_exit_dttm_fix**: 离开手术室时间
- **anesth_start_dttm_fix**: 麻醉开始时间
- **anesth_end_dttm_fix**: 麻醉结束时间

### 临床特征
- **AgeAtSurgery**: 手术时年龄
- **SexCode**: 性别代码
- **BMI/BMI2**: 体重指数
- **Weight_Value**: 体重值
- **Diabetes_Flg**: 糖尿病标志
- **EG_CharlsScore**: Charlson合并症指数
- **NRTN_Score**: NRTN评分

### 手术相关特征
- **UrgencyFLG**: 紧急程度标志
- **SurgeryTypes_1/2/3**: 手术类型分类
- **Pro1/2/3**: 手术程序代码（ICD-9-CM）
- **SurgeryRoomCode_***: 手术室编码
- **General_anesthesia/Regional_anesthesia**: 麻醉类型
- **num_surg_anes_worked**: 参与手术的麻醉师数量

### 患者特征
- **birth_country_***: 出生国家（多国别编码）
- **family_stat_***: 家庭状态
- **ChildrenNum**: 子女数量
- **ambulatory_visits**: 门诊就诊次数
- **total_admission_days**: 总住院天数
- **addmissions**: 入院次数

## 数据预处理记录

### 清洗步骤
1. **列名标准化**: 统一为小写，空格替换为下划线
2. **目标变量识别**: 自动识别手术时长相关列，重命名为`duration_min`
3. **数据类型转换**: 数值列、日期列、分类列的类型转换
4. **缺失值处理**: 记录缺失值分布，为后续处理做准备
5. **时序特征创建**: 从日期列派生时间相关特征

### 特征工程
- **时间特征**: 小时、星期、月份、季度、是否周末、时间段
- **分类特征**: 识别高基数类别变量（>50个唯一值）
- **数值特征**: 标准化数值范围

## 数据质量评估

### 缺失值分析
- **数据完整性**: 所有5,240条记录均无缺失值
- **数据质量**: 数据质量良好，无需缺失值处理

### 异常值检测
- **手术时长异常**: 存在0分钟记录，需要临床验证
- **数据范围**: 手术时长0-330分钟，大部分集中在合理范围内
- **建议**: 对0分钟记录进行临床合理性检查

### 分布特征
- **手术时长分布**: 均值88.52分钟，标准差36.14分钟
- **数据偏斜**: 可能存在右偏分布（长尾）
- **样本分布**: 5,240例手术记录，样本量充足

### 相关性分析
- **时间特征**: 手术开始时间可能影响手术时长
- **临床特征**: 年龄、BMI、合并症等可能相关
- **手术特征**: 手术类型、紧急程度、麻醉类型等关键因素

## 潜在偏差与限制

### 数据偏差
- **时间偏差**: 数据可能来自特定时间段，存在季节性偏差
- **地理偏差**: 可能来自特定地区或医疗机构
- **患者偏差**: 可能偏向特定年龄、性别或病情严重程度

### 数据质量限制
- **缺失值**: 某些关键特征可能存在缺失
- **异常值**: 极端的手术时长可能影响模型训练
- **类别不平衡**: 某些手术类型或患者特征可能样本较少

### 伦理边界
⚠️ **重要提醒**: 
- 本数据集仅用于学术研究和模型开发
- **不得用于个体患者的医疗决策**
- **不得用于商业医疗产品**
- 使用本数据时需遵守相关伦理准则和数据使用协议

## 数据使用建议

### 模型开发
- 使用交叉验证确保模型泛化能力
- 考虑数据不平衡问题，使用适当的采样策略
- 对高基数类别变量使用目标编码或频次压缩

### 特征选择
- 优先使用临床相关的特征
- 时间特征可能对手术时长预测有重要价值
- 注意特征间的多重共线性

### 验证策略
- 使用时间序列分割进行验证
- 考虑不同医疗机构间的泛化能力
- 定期更新模型以适应新的数据分布

## 更新记录

| 日期 | 版本 | 更新内容 | 更新人 |
|------|------|----------|--------|
| 2024-12-19 | 1.0 | 初始版本 | 系统生成 |

## 联系方式

如有数据相关问题，请联系项目团队。

---

**注意**: 本数据卡将根据实际数据处理结果持续更新和完善。
